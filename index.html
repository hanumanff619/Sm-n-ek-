<!doctype html>
<html lang="cs">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Směnářek</title>
<link rel="manifest" href="manifest.json">
<link rel="icon" href="icons/icon-192.png">
<style>
:root{
  --bg:#0c1d33; --panel:#122e52; --ink:#eaf2ff; --muted:#9fb3cc;
  --good:#5bd39a; --accent:#b38cff; --sel:#7b3ff299; --green:#1a3a2a; --greenOn:#c6ffe0;
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;background:var(--bg);color:var(--ink);font-family:system-ui,Segoe UI,Roboto,Arial}
header{position:sticky;top:0;z-index:5;background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,0));}
.container{max-width:980px;margin:0 auto;padding:1rem}
.head{display:flex;align-items:center;justify-content:space-between}
.logo{display:flex;gap:.75rem;align-items:center}
.logo .cal{font-size:2.4rem}
h1{margin:.3rem 0 0 0;font-size:2rem;font-weight:800;letter-spacing:.5px}
.btn{background:transparent;border:1px solid rgba(255,255,255,.25);color:var(--ink);padding:.5rem .9rem;border-radius:12px;cursor:pointer}
.btn:hover{background:rgba(255,255,255,.06)}
.card{background:var(--panel);border-radius:18px;padding:1rem 1rem;margin:1rem 0;box-shadow:0 6px 24px rgba(0,0,0,.25);position:relative;overflow:hidden}
h3{margin:.25rem 0 1rem 0;letter-spacing:.4px}
.row{display:flex;gap:.5rem;flex-wrap:wrap;align-items:center}
.controls .btn{min-width:64px}
.line{margin-top:.75rem;color:var(--muted);font-weight:700}
.kv{display:grid;grid-template-columns:1fr auto;gap:.35rem .75rem}
.badge{display:inline-block;padding:.35rem .6rem;border-radius:10px;background:var(--green);color:var(--greenOn);font-weight:700}
.results .item{background:linear-gradient(180deg, #1b3a2e, #0f2a22);padding:.9rem 1rem;border-radius:14px;margin:.5rem 0}
.results .item span{float:right}
.footer{opacity:.85;text-align:center;margin:1.5rem 0 2.5rem 0}
.footer .sig{font-weight:800}
.footer .h{color:#4aa3ff}
.footer .t{color:#ff69b4}
.footer .amp{color:#ff3b30}
/* modal */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.45);backdrop-filter:blur(2px)}
.modal.show{display:flex}
.sheet{width:min(780px,92vw);max-height:86vh;overflow:auto;border-radius:16px;background:var(--panel);padding:1rem;border:1px solid rgba(255,255,255,.08)}
.sheet h4{margin:.6rem 0}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:.6rem .9rem}
label{color:var(--muted)}
input,select{width:100%;padding:.55rem .65rem;border-radius:10px;border:1px solid rgba(255,255,255,.18);background:#0e2038;color:var(--ink)}
.actions{display:flex;justify-content:flex-end;gap:.6rem;margin-top:.9rem}
/* calendar */
#calWrap{position:relative}
#bg-layer{position:absolute;inset:0;background-size:cover;background-position:center;opacity:.25;filter:grayscale(.2)}
.calendar{position:relative;width:100%;border-collapse:collapse}
.calendar th,.calendar td{border:1px solid rgba(255,255,255,.15);text-align:center}
.calendar th{color:var(--muted);font-weight:700;padding:.4rem .3rem}
.calendar td{height:82px;position:relative}
.daynum{position:absolute;top:.25rem;right:.35rem;font-size:.9rem;color:var(--muted)}
.cellcode{position:absolute;bottom:.35rem;left:.45rem;background:rgba(0,0,0,.35);padding:.25rem .45rem;border-radius:8px}
.calendar td.today{box-shadow:inset 0 0 0 2px var(--accent)}
.calendar td.selected{background:var(--sel)}
.info{position:absolute;right:14px;top:10px;opacity:.9}
.small{font-size:.9rem;color:var(--muted)}
</style>
</head>
<body>
<header>
  <div class="container head">
    <div class="logo">
      <div class="cal">📆</div>
      <h1>Směnářek</h1>
    </div>
    <button id="btnSettings" class="btn">⚙️ Nastavení</button>
  </div>
</header>

<main class="container">
  <div class="card">
    <div id="bg-layer"></div>
    <div class="row controls">
      <button class="btn" id="prev">←</button>
      <button class="btn" id="todayBtn">Dnes</button>
      <button class="btn" id="next">→</button>
      <div class="line" id="todayLine">Dnes: —&nbsp;&nbsp; Svátek: —</div>
    </div>
    <table class="calendar" id="calendar"></table>
  </div>

  <div class="card">
    <h3>Výsledky</h3>
    <div class="results">
      <div class="item">Čistá mzda <span id="outNet">0,00 Kč</span></div>
      <div class="item">Stravenky <span id="outMeals">0,00 Kč</span></div>
      <div class="item">Cafeterie <span id="outCaf">0,00 Kč</span></div>
    </div>
    <div class="line">Součet za rok: <span id="outYear">0,00 Kč</span></div>
  </div>

  <div class="footer small">
    <div class="sig">Směnářek 2.0</div>
    <div><span class="h">Hanuman</span> <span class="amp">&amp;</span> <span class="t">Terezka AI</span></div>
  </div>
</main>

<!-- Nastavení -->
<div class="modal" id="settingsModal" aria-hidden="true">
  <div class="sheet">
    <h3>Nastavení</h3>

    <h4>Režim směn</h4>
    <div class="row">
      <label><input type="radio" name="mode" id="mode12" checked> 12 h (D/N/V)</label>
      <label><input type="radio" name="mode" id="mode8"> 8 h (R/O/N/V)</label>
    </div>

    <h4>Měna & jazyk</h4>
    <div class="grid2">
      <div><label>Měna</label>
        <select id="st_ccy">
          <option value="CZK">Kč</option>
          <option value="EUR">€</option>
          <option value="USD">$</option>
        </select>
      </div>
      <div><label>Jazyk</label>
        <select id="st_lang">
          <option value="cs">Čeština</option>
          <option value="en">English</option>
          <option value="de">Deutsch</option>
        </select>
      </div>
    </div>

    <h4>Stravenky a obědy</h4>
    <div class="grid2">
      <div><label>Cena obědu (Kč/ks)</label><input id="st_meal" type="number" step="1" value="40"></div>
      <div><label>Hodnota stravenky (pro zaměstnance) (Kč/ks)</label><input id="st_voucher_emp" type="number" step="1" value="110"></div>
      <div><label>Srážka za stravenku (Kč/ks)</label><input id="st_voucher_ded" type="number" step="1" value="40"></div>
      <div><label>Stravenky za denní</label><input id="st_v_day" type="number" step="1" value="1"></div>
      <div><label>Stravenky za noční</label><input id="st_v_night" type="number" step="1" value="2"></div>
    </div>

    <h4>Příplatky a bonusy</h4>
    <div class="grid2">
      <div><label>Základní hodinovka (Kč/h)</label><input id="st_base" type="number" step="0.01" value="185"></div>
      <div><label>Přímé prémie (%)</label><input id="st_direct" type="number" step="1" value="10"></div>
      <div><label>Odpolední (Kč/h)</label><input id="st_b_af" type="number" step="0.01" value="10"></div>
      <div><label>Noční (Kč/h)</label><input id="st_b_night" type="number" step="0.01" value="25"></div>
      <div><label>Víkend (Kč/h)</label><input id="st_b_wk" type="number" step="0.01" value="35"></div>
      <div><label>Nepřetržitý (Kč/h)</label><input id="st_b_cont" type="number" step="0.01" value="4"></div>
      <div><label>Průměrná náhrada (Kč/h) – svátek</label><input id="st_hol" type="number" step="0.01" value="259.09"></div>
      <div><label>Roční motivační (Kč) – přičítat jen v 6 & 11</label><input id="st_year" type="number" step="1" value="1000"></div>
    </div>

    <div class="actions">
      <button class="btn" id="btnCancel">Zrušit</button>
      <button class="btn" id="btnSave">Uložit nastavení</button>
    </div>
  </div>
</div>

<script src="app_v2.js"></script>
</body>
</html>
