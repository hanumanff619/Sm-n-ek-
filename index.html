<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#1a1f2b">
  <title>Směnářek</title>

  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" href="icons/icon-192.png">
  <link rel="stylesheet" href="style.css">

  <style>
    body {
      background-color: #0f1320;
      color: #e3e6f1;
      font-family: "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #182037;
      color: #fff;
      padding: 10px 16px;
      box-shadow: 0 2px 5px rgba(0,0,0,.4);
      position: sticky;
      top: 0;
      z-index: 5;
    }
    h1 { margin: 0; font-size: 1.4em; color:#7ab8ff; }
    main.wrap { padding: 10px; max-width: 900px; margin: auto; }

    .card {
      background: #1d263d;
      border-radius: 10px;
      padding: 14px;
      margin-bottom: 18px;
      position: relative;
      overflow: hidden;
      box-shadow: 0 0 8px rgba(0,0,0,.5);
    }

    .h3wrap {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 6px;
    }

    .info {
      cursor: pointer;
      font-size: 1.1em;
      margin-left: 8px;
    }
    .tooltip {
      display:none;
      position:absolute;
      right:12px;
      top:30px;
      background:#2c3552;
      color:#fff;
      border-radius:6px;
      padding:6px 10px;
      width:260px;
      box-shadow:0 2px 8px rgba(0,0,0,.6);
      z-index:3;
    }
    .info:hover + .tooltip,
    .tooltip:hover { display:block; }

    table.calendar {
      width: 100%;
      border-collapse: collapse;
      text-align: center;
      position:relative;
      z-index:1;
    }
    table.calendar td {
      padding: 6px;
      border-radius: 6px;
      cursor: pointer;
    }
    table.calendar td.active {
      background: #3a82f6;
      color: #fff;
    }

    .row { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 6px; align-items: center; }
    .row label { min-width: 130px; font-size: .9em; }
    .row input, .row select {
      background: #11182b; border:1px solid #2a375b;
      color:#e3e6f1; border-radius:6px; padding:4px 6px;
    }

    .result { display:flex; justify-content:space-between; margin:4px 0; }
    .payline strong { color:#7ab8ff; }
    .todayBox { text-align:center; font-size:.95em; }
  </style>
</head>
<body>

<header>
  <div class="logo">
    <h1 data-i18n="title">Směnářek</h1>
  </div>
  <div class="todayBox">
    <div><strong data-i18n="today">Dnes:</strong> <span id="todayShift"></span></div>
    <div><strong data-i18n="nameday">Svátek:</strong> <span id="todayName"></span></div>
  </div>
</header>

<main class="wrap">

  <!-- KALENDÁŘ -->
  <div class="card" id="card-calendar">
    <div id="bg-layer" style="position:absolute;inset:0;background-size:cover;background-position:center;opacity:.30;pointer-events:none;z-index:0;"></div>

    <div class="h3wrap" style="position:relative;z-index:1;">
      <h3 data-i18n="calendar">Kalendář</h3>
      <span class="info" aria-label="info">ℹ️</span>
      <div class="tooltip">
        <b data-i18n="calHelpTitle">Jak používat kalendář</b><br>
        <span data-i18n="calHelpBody">
          Klepni na den pro přepnutí směny (D/N/V/R). Dlouhý stisk = smazat.
          Šipkami měníš měsíc, „Dnes“ skočí na aktuální datum.
        </span>
      </div>
    </div>

    <div class="row" style="position:relative;z-index:1;">
      <button id="prevMonth" aria-label="Prev">←</button>
      <div id="monthLabel"></div>
      <button id="nextMonth" aria-label="Next">→</button>
      <button id="btnTodayTop" data-i18n="btnToday">Dnes</button>
      <button id="clearDayTop" data-i18n="btnClear">Vymazat den</button>
    </div>

    <table class="calendar" id="calendar" style="position:relative;z-index:1;"></table>
  </div>

  <!-- NASTAVENÍ -->
  <div class="card" id="card-settings">
    <div class="h3wrap">
      <h3 data-i18n="settings">Nastavení</h3>
      <span class="info">ℹ️</span>
      <div class="tooltip">
        <b data-i18n="settingsHelpTitle">Nastavení aplikace</b><br>
        <span data-i18n="settingsHelpBody">
          Zvol režim směn (12h nebo 8h), jazyk a měnu. Změny se uloží do zařízení.
        </span>
      </div>
    </div>

    <div class="row">
      <label data-i18n="shiftMode">Režim směn:</label>
      <div class="chip"><input type="radio" name="mode" id="mode12" value="12"><label for="mode12" data-i18n="mode12">12 h (D/N/V)</label></div>
      <div class="chip"><input type="radio" name="mode" id="mode8" value="8"><label for="mode8" data-i18n="mode8">8 h (R/O/N/V)</label></div>
    </div>

    <div class="row">
      <label for="langSelect" data-i18n="language">Jazyk:</label>
      <select id="langSelect">
        <option value="cs">Čeština</option>
        <option value="en">English</option>
        <option value="de">Deutsch</option>
      </select>
      <label for="currencySelect" data-i18n="currency">Měna:</label>
      <select id="currencySelect">
        <option value="CZK">Kč</option>
        <option value="EUR">€</option>
        <option value="USD">$</option>
      </select>
    </div>
  </div>

  <!-- STATISTIKY -->
  <div class="card" id="card-stats">
    <div class="h3wrap">
      <h3 data-i18n="monthStats">Statistiky měsíce</h3>
    </div>
    <p class="subtle" data-i18n="rules">
      Obědy jen všední den při denní (12h: D; 8h: R). Dovolená = nastavené hodiny/den. Svátek: směna + průměr.
    </p>
    <div id="monthStatsOutput"></div>
  </div>

  <!-- MZDA (VSTUPY) -->
  <div class="card" id="card-wage">
    <div class="h3wrap">
      <h3 data-i18n="wageInputs">Mzda (vstupy)</h3>
    </div>

    <div class="row">
      <label for="baseRate" data-i18n="baseRate">Základní hodinovka</label>
      <input id="baseRate" type="number" inputmode="decimal">
    </div>
    <div class="row">
      <label for="aftBonus" data-i18n="aftBonus">Odpolední příplatek</label>
      <input id="aftBonus" type="number" inputmode="decimal">
      <label for="nightBonus" data-i18n="nightBonus">Noční příplatek</label>
      <input id="nightBonus" type="number" inputmode="decimal">
    </div>
    <div class="row">
      <label for="weekendBonus" data-i18n="weekendBonus">Víkendový příplatek</label>
      <input id="weekendBonus" type="number" inputmode="decimal">
      <label for="holidayWorked" data-i18n="holidayWorked">Svátek (Kč/h) – odpracovaný</label>
      <input id="holidayWorked" type="number" inputmode="decimal">
    </div>
    <div class="row">
      <label for="continuousBonus" data-i18n="continuousBonus">Nepřetržitý provoz</label>
      <input id="continuousBonus" type="number" inputmode="decimal">
      <label for="directBonus" data-i18n="directBonus">Přímé prémie (%)</label>
      <input id="directBonus" type="number" inputmode="decimal">
    </div>
    <div class="row">
      <label for="cafeteria1000" data-i18n="cafeteriaBonus">Docházkový bonus (Cafeterie 1000 Kč – mimo čistou)</label>
      <input id="cafeteria1000" type="checkbox">
      <label for="annualMotiv" data-i18n="annualMotiv">Roční motivační (Kč)</label>
      <input id="annualMotiv" type="number" inputmode="decimal">
    </div>
    <div class="row">
      <label for="vacHoursPerDay" data-i18n="vacPerDay">Dovolená (hod/den)</label>
      <input id="vacHoursPerDay" type="number" inputmode="decimal">
    </div>
  </div>

  <!-- PRŮMĚRNÁ NÁHRADA -->
  <div class="card" id="card-avg">
    <div class="h3wrap">
      <h3 data-i18n="avgHeader">Průměrná náhrada (poslední 3 měsíce)</h3>
      <span class="info">ℹ️</span>
      <div class="tooltip">
        <b data-i18n="avgHelpTitle">Jak počítáme průměr</b><br>
        <span data-i18n="avgHelpBody">
          Zadej čisté mzdy a odpracované hodiny za poslední 3 měsíce
          nebo ručně vyplň průměr (Kč/h). Výsledek se použije pro svátky a dovolenou.
        </span>
      </div>
    </div>
    <div id="avgInputs"></div>
    <div class="result"><span data-i18n="avgResult">Průměrná náhrada:</span><span id="avgOut">0,00 Kč</span></div>
  </div>

  <!-- VÝSLEDKY -->
  <div class="card" id="card-results">
    <div class="result payline"><strong data-i18n="gross">Hrubá mzda:</strong><span id="grossOut">0,00 Kč</span></div>
    <div class="result payline"><strong data-i18n="netEst">Čistá mzda (odhad):</strong><span id="netOut">0,00 Kč</span></div>
    <div class="result payline"><strong data-i18n="vouchers">Stravenky:</strong><span id="vouchersOut">0,00 Kč</span></div>
    <div class="result payline"><strong data-i18n="cafeteriaOut">Cafeterie (mimo čistou):</strong><span id="cafeteriaOut">0,00 Kč</span></div>
  </div>

</main>

<script src="app_v181.js?v=194" defer></script>
</body>
</html>
